Хорошо, вот как можно создать Docker Swarm кластер с одной управляющей нодой и двумя worker-нодами на Yandex.Cloud:

Создайте аккаунт на Yandex.Cloud и подключитесь к своей учетной записи в консоли управления.

Создайте виртуальные машины, которые будут служить в качестве управляющей и рабочих нод кластера Docker Swarm. В нашем случае нам нужно создать три виртуальные машины: одну для управляющей ноды и две для worker-нод.

Перейдите на страницу создания виртуальной машины и заполните необходимые данные для каждой виртуальной машины, включая:

Имя и описание
Регион размещения
Тип машины и количество ядер
Образ операционной системы
Сетевые настройки
Для управляющей ноды выберите образ Ubuntu 20.04 LTS и при создании настройте внешний IP-адрес.

Для worker-нод также выберите образ Ubuntu 20.04 LTS.

Убедитесь, что для каждой виртуальной машины открыты следующие порты:

22 (SSH)
2377 (TCP)
7946 (TCP/UDP)
4789 (UDP)
После того, как все три виртуальные машины созданы и настроены, выполните следующие команды на управляющей ноде:
sql
Copy code
sudo apt-get update
sudo apt-get install docker.io -y
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker $USER
Далее установите Docker Swarm на управляющей ноде, выполнив следующую команду:
csharp
Copy code
sudo docker swarm init --advertise-addr <ip-адрес управляющей ноды>
После выполнения команды swarm init в терминале появится команда docker swarm join, которую нужно выполнить на worker-нодах, чтобы присоединить их к кластеру. Эта команда выглядит примерно так:
php
Copy code
sudo docker swarm join --token <токен> <ip-адрес управляющей ноды>:2377
После того, как все worker-ноды присоединены к кластеру, вы можете проверить состояние кластера, выполните команду на управляющей ноде:
bash
Copy code
sudo docker node ls
Теперь у вас есть рабочий кластер Docker Swarm с одной управляющей нодой и двумя worker-нодами на Yandex.Cloud.
